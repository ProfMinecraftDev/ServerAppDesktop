<?xml version="1.0" encoding="utf-8" ?>
<Page
	x:Class="ServerAppDesktop.Views.OOBEView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:local="using:ServerAppDesktop.Views"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:models="using:ServerAppDesktop.Models"
	xmlns:toolkitControls="using:CommunityToolkit.WinUI.Controls"
	xmlns:toolkitExtensions="using:CommunityToolkit.WinUI"
	mc:Ignorable="d">

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<TextBlock
			x:Uid="OOBEView_WelcomeText"
			Grid.Row="0"
			MaxWidth="1064"
			Margin="0,40,0,36"
			Style="{StaticResource TitleTextBlockStyle}"
			TextAlignment="Center"
			TextWrapping="Wrap" />

		<ScrollViewer
			Grid.Row="1"
			Padding="36,0,36,0"
			VerticalScrollBarVisibility="Auto"
			VerticalScrollMode="Auto">
			<StackPanel ChildrenTransitions="{StaticResource DefaultLayoutTransitions}" Spacing="{StaticResource SettingsCardSpacing}">
				<TextBlock x:Uid="AppearanceHeader" Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" />

				<toolkitControls:SettingsCard x:Uid="BackdropSettingsCard" HeaderIcon="{toolkitExtensions:FontIcon Glyph=&#xF156;}">
					<ComboBox
						Width="170"
						ItemsSource="{x:Bind ViewModel.WindowBackdrops}"
						SelectedItem="{x:Bind ViewModel.SelectedBackdrop, Mode=TwoWay}">
						<ComboBox.ItemTemplate>
							<DataTemplate x:DataType="models:WindowBackdrop">
								<TextBlock Text="{x:Bind Name}" />
							</DataTemplate>
						</ComboBox.ItemTemplate>
					</ComboBox>
				</toolkitControls:SettingsCard>

				<toolkitControls:SettingsCard x:Uid="ThemeSettingsCard" HeaderIcon="{toolkitExtensions:FontIcon Glyph=&#xE790;}">
					<ComboBox
						Width="150"
						ItemsSource="{x:Bind ViewModel.WindowThemes}"
						SelectedItem="{x:Bind ViewModel.SelectedTheme, Mode=TwoWay}">
						<ComboBox.ItemTemplate>
							<DataTemplate x:DataType="models:WindowTheme">
								<TextBlock Text="{x:Bind Name}" />
							</DataTemplate>
						</ComboBox.ItemTemplate>
					</ComboBox>
				</toolkitControls:SettingsCard>

				<TextBlock x:Uid="ServerHeader" Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" />

				<toolkitControls:SettingsCard x:Uid="EditionSettingsCard" HeaderIcon="{toolkitExtensions:FontIcon Glyph=&#xE7FC;}">
					<ComboBox
						Width="200"
						ItemsSource="{x:Bind ViewModel.MinecraftEditions}"
						SelectedItem="{x:Bind ViewModel.SelectedMinecraftEdition, Mode=TwoWay}">
						<ComboBox.ItemTemplate>
							<DataTemplate x:DataType="models:MinecraftEdition">
								<TextBlock Text="{x:Bind Name}" />
							</DataTemplate>
						</ComboBox.ItemTemplate>
					</ComboBox>
				</toolkitControls:SettingsCard>

				<toolkitControls:SettingsCard x:Uid="PathSettingsCard" HeaderIcon="{toolkitExtensions:FontIcon Glyph=&#xEDA2;}">
					<StackPanel Orientation="Horizontal" Spacing="8">
						<TextBlock VerticalAlignment="Center" Text="{x:Bind ViewModel.ServerPath, Mode=OneWay}" />
						<Button
							x:Uid="BrowsePathButton"
							VerticalAlignment="Center"
							Command="{x:Bind ViewModel.SelectServerPathCommand}"
							CommandParameter="{x:Bind XamlRoot}"
							IsEnabled="{x:Bind ViewModel.CanSelectFolder}"
							Style="{StaticResource AccentButtonStyle}">
							<StackPanel Orientation="Horizontal" Spacing="8">
								<FontIcon Glyph="&#xE8DA;" />
								<TextBlock x:Uid="BrowsePathButtonText" />
							</StackPanel>
						</Button>
					</StackPanel>
				</toolkitControls:SettingsCard>

				<toolkitControls:SettingsCard x:Uid="ExecutableSettingsCard" HeaderIcon="{toolkitExtensions:FontIcon Glyph=&#xE943;}">
					<StackPanel Orientation="Horizontal" Spacing="8">
						<TextBlock VerticalAlignment="Center" Text="{x:Bind ViewModel.ServerExecutable, Mode=OneWay}" />
						<Button
							x:Uid="BrowseExeButton"
							VerticalAlignment="Center"
							Command="{x:Bind ViewModel.SelectServerExecutableCommand}"
							CommandParameter="{x:Bind XamlRoot}"
							IsEnabled="{x:Bind ViewModel.CanSelectExecutable}"
							Style="{StaticResource AccentButtonStyle}">
							<StackPanel Orientation="Horizontal" Spacing="8">
								<FontIcon Glyph="&#xE8E5;" />
								<TextBlock x:Uid="BrowseExeButtonText" />
							</StackPanel>
						</Button>
					</StackPanel>
				</toolkitControls:SettingsCard>

				<toolkitControls:SettingsCard x:Uid="PortSettingsCard" HeaderIcon="{toolkitExtensions:FontIcon Glyph=&#xE839;}">
					<StackPanel Orientation="Horizontal" Spacing="8">
						<CheckBox x:Name="UsePortPropertiesCheckBox" x:Uid="UsePropertiesCheckBox" />
						<NumberBox
							x:Uid="ServerPortNumberBox"
							Width="200"
							LargeChange="100"
							Maximum="65535"
							Minimum="1"
							SmallChange="1"
							Visibility="{x:Bind UsePortPropertiesCheckBox.IsChecked, Mode=OneWay, Converter={StaticResource BoolNegationToVisibilityConverter}}"
							Value="{x:Bind ViewModel.ServerPort, Mode=TwoWay}" />
					</StackPanel>
				</toolkitControls:SettingsCard>

				<toolkitControls:SettingsCard x:Uid="DescriptionSettingsCard" HeaderIcon="{toolkitExtensions:FontIcon Glyph=&#xE932;}">
					<StackPanel Orientation="Horizontal" Spacing="8">
						<CheckBox x:Name="UseDescriptionPropertiesCheckBox" x:Uid="UsePropertiesCheckBox" />
						<TextBox
							x:Uid="ServerDescriptionTextBox"
							MinWidth="100"
							Text="{x:Bind ViewModel.ServerDescription, Mode=TwoWay}"
							TextWrapping="Wrap"
							Visibility="{x:Bind UseDescriptionPropertiesCheckBox.IsChecked, Mode=OneWay, Converter={StaticResource BoolNegationToVisibilityConverter}}" />
					</StackPanel>
				</toolkitControls:SettingsCard>

				<TextBlock x:Uid="StartupHeader" Style="{StaticResource SettingsSectionHeaderTextBlockStyle}" />

				<toolkitControls:SettingsCard x:Uid="AutoStartSettingsCard" HeaderIcon="{toolkitExtensions:FontIcon Glyph=&#xE78B;}">
					<StackPanel Orientation="Horizontal" Spacing="8">
						<InfoBadge Style="{StaticResource CautionIconInfoBadgeStyle}" />
						<ToggleSwitch x:Uid="AutoStartToggleSwitch" IsOn="{x:Bind ViewModel.AutoStartServer, Mode=TwoWay}" />
					</StackPanel>
				</toolkitControls:SettingsCard>
			</StackPanel>
		</ScrollViewer>

		<InfoBar
			x:Uid="AttentionInfoBar"
			Grid.Row="2"
			Margin="36,24,36,36"
			IsClosable="False"
			IsOpen="True">
			<InfoBar.ActionButton>
				<Button x:Uid="GoButton" Command="{x:Bind ViewModel.SaveOOBESettingsCommand}" />
			</InfoBar.ActionButton>
		</InfoBar>

		<ContentDialog
			x:Name="welcomeOOBEDialog"
			x:Uid="WelcomeOOBEDialog"
			CloseButtonStyle="{StaticResource AccentButtonStyle}" />
	</Grid>
</Page>
